{"version":3,"sources":["../../src/pages/approve-koreksi-absen/approve-koreksi-absen.module.ts","../../src/pages/approve-koreksi-absen/approve-koreksi-absen.ts"],"names":[],"mappings":"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","file":"67.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ApproveKoreksiAbsenPage } from './approve-koreksi-absen';\n\n@NgModule({\n  declarations: [\n    ApproveKoreksiAbsenPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ApproveKoreksiAbsenPage),\n  ],\n})\nexport class ApproveKoreksiAbsenPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/approve-koreksi-absen/approve-koreksi-absen.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, LoadingController, AlertController, ToastController } from 'ionic-angular';\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\n\nimport { SoapService } from '../soap.service';\nimport { Storage } from '@ionic/storage';\nimport { api_base_url, api_user, api_pass } from '../../config';\n/**\n * Generated class for the ApproveKoreksiAbsenPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-approve-koreksi-absen',\n  providers: [SoapService],\n  templateUrl: 'approve-koreksi-absen.html',\n})\nexport class ApproveKoreksiAbsenPage {\n  ApprovalForm: FormGroup;\n  status: any;\n  is_tno: any;\n  dataKoreksi: any;\n  errorMsg: any;\n  userdataTPK: any;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private _fb: FormBuilder,\n    public viewCtrl: ViewController,\n    public soapService: SoapService,\n    public storage: Storage,\n    public loadingCtrl: LoadingController,\n    public alertCtrl: AlertController,\n    public toastCtrl: ToastController\n  ) {\n\n    this.storage.get('userdataTPK').then(val => {\n      this.userdataTPK = val;\n    });\n    this.status = navParams.get('status');\n    this.dataKoreksi = navParams.get('dataKoreksi');\n    // console.log(this.dataKoreksi);\n    this.is_tno = navParams.get('is_tno');\n\n    this.ApprovalForm = this._fb.group({\n      fcKomentarDatang: ['', Validators.compose([\n        Validators.required\n      ])],\n      fcKomentarPulang: ['', Validators.compose([\n        Validators.required\n      ])]\n    });\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ApproveKoreksiAbsenPage');\n  }\n\n  submit() {\n    if ((this.dataKoreksi['KETERANGAN KOREKSI DATANG'] == '' || this.dataKoreksi['KETERANGAN KOREKSI DATANG'] == null) && (this.dataKoreksi['STATUS KOREKSI DATANG'] == '' || this.dataKoreksi['STATUS KOREKSI DATANG'] == '')) {\n      if (this.ApprovalForm.controls.fcKomentarPulang.value != '') {\n        this.sendData();\n      } else {\n        // console.log('error pulang');\n        this.errorMsg = '*Field Tidak Boleh Kosong';\n      }\n    } else if ((this.dataKoreksi['KETERANGAN KOREKSI PULANG'] == '' || this.dataKoreksi['KETERANGAN KOREKSI PULANG'] == null) && this.dataKoreksi['STATUS KOREKSI PULANG'] == '' || this.dataKoreksi['STATUS KOREKSI PULANG'] == null) {\n      if (this.ApprovalForm.controls.fcKomentarDatang.value != '') {\n        this.sendData();\n      } else {\n        // console.log('error datang');\n        this.errorMsg = '*Field Tidak Boleh Kosong';\n      }\n    } else {\n      if (this.ApprovalForm.controls.fcKomentarDatang.value != '' && this.ApprovalForm.controls.fcKomentarPulang.value != '') {\n        this.sendData();\n      } else {\n        this.errorMsg = '*Field Tidak Boleh Kosong';\n      }\n    }\n  }\n\n  sendData() {\n    var tno = this.is_tno ? \"1\" : \"0\";    \n    var msg=\"\";\n    if (this.status == 1) {\n      msg=\"Anda yakin ingin approve koreksi absen bawahan ?\"\n    } else if (this.status == 0) {\n      msg=\"Anda yakin ingin decline koreksi absen bawahan ?\"\n    } else {\n      // console.log('error here');\n    }\n\n    let alert = this.alertCtrl.create({\n      subTitle: msg,\n      cssClass: 'alert',\n      buttons: [\n        {\n          text: 'TIDAK',\n          role: 'cancel',\n          handler: () => {\n            // console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'YA',\n          handler: () => {\n            let loading = this.loadingCtrl.create({\n              spinner: 'dots',\n              content: \"Mohon Tunggu...\",\n              cssClass: 'transparent',\n              //dismissOnPageChange:true\n            });\n            loading.present();\n            this.soapService.post(api_base_url, 'eoffice_absen_confirm', {\n              fStream: JSON.stringify({\n                usernameEDI: api_user,\n                passwordEDI: api_pass,\n                nipp: this.dataKoreksi['NIPP'],\n                id_koreksi: this.dataKoreksi['ID KOREKSI'],\n                komen_datang: this.ApprovalForm.controls.fcKomentarDatang.value,\n                komen_pulang: this.ApprovalForm.controls.fcKomentarPulang.value,\n                is_tno: this.is_tno ? \"1\" : \"0\",\n                confirm: this.status,\n              }\n              )\n            }).then(result => {\n              var responData = JSON.parse(String(result));\n              if (responData['rcmsg'] == \"SUCCESS\") {                \n                this.viewCtrl.dismiss().then(() => {\n                  if (this.status == 1) {\n                    this.sendNotif('approve');\n                  } else if (this.status == 0) {\n                    this.sendNotif('decline');\n                  } else {\n                    // console.log('error here');\n                  }\n\n                });\n              } else {                \n                let toast = this.toastCtrl.create({\n                  message: 'Mohon Maaf Sedang Terjadi Kesalahan, Coba Beberapa Saat Lagi.',\n                  duration: 3000,\n                  position: 'bottom'\n                });\n                toast.present();\n              }\n              loading.dismiss();\n            })\n              .catch(error => {\n                // console.log(error);\n                let toast = this.toastCtrl.create({\n                  message: 'Terjadi Masalah Koneksi, Silahkan Coba Kembali.',\n                  duration: 3000,\n                  position: 'bottom'\n                });\n                toast.present();\n                loading.dismiss();\n              });\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  sendNotif(type) {    \n    this.soapService\n      .post(api_base_url, 'eoffice_notif_imove_nipp', {\n        fStream: JSON.stringify(\n          {\n            usernameEDI: api_user,\n            passwordEDI: api_pass,\n            nipp: [this.dataKoreksi['NIPP']],\n            data: {\n              \"res\": \"AbsenListPage\"\n            },\n            content: {\n              \"en\": type == 'approve' ? \"Pengajuan Koreksi Absen Anda Disetujui Oleh \" + this.userdataTPK['data']['NAMA'] : \"Pengajuan Koreksi Absen Anda Ditolak Oleh \" + this.userdataTPK['data']['NAMA']\n            },\n            heading : {\n              \"en\": \"Pengajuan Koreksi Absen\"\n            },\n            id_kategori: '',\n            id_user: '',\n            id_jabatan: ''\n          }\n\n        )\n      }).then(result => {\n        let hasil = JSON.parse(String(result));        \n        this.navCtrl.pop();\n      }).catch(error => {\n        // console.log(error);\n        this.navCtrl.pop();\n\n      });\n  }\n\n  cancel() {\n    this.viewCtrl.dismiss();\n  }\n\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/approve-koreksi-absen/approve-koreksi-absen.ts"],"sourceRoot":""}