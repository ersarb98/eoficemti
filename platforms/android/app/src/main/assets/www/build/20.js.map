{"version":3,"sources":["../../src/pages/search-payslip/search-payslip.module.ts","../../src/pages/search-payslip/search-payslip.ts"],"names":[],"mappings":"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","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SearchPayslipPage } from './search-payslip';\n\n@NgModule({\n  declarations: [\n    SearchPayslipPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SearchPayslipPage),\n  ],\n})\nexport class SearchPayslipPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search-payslip/search-payslip.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, LoadingController, AlertController, ToastController } from 'ionic-angular';\nimport { DatePicker } from '@ionic-native/date-picker';\nimport { DatePipe } from '@angular/common';\nimport { SoapService } from '../soap.service';\nimport { Storage } from '@ionic/storage';\nimport { api_base_url, api_user, api_pass, sc_code } from '../../config';\nimport { Platform } from 'ionic-angular';\nimport { CurrencyPipe } from '@angular/common';\n/**\n * Generated class for the SearchPayslipPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-search-payslip',\n  providers: [SoapService],\n  templateUrl: 'search-payslip.html',\n})\nexport class SearchPayslipPage {\n  tahun: any = '';\n  bulan: any = '';\n\n  currentYear: any = '';\n  tahunList: Array<any> = [];\n  epayslipList: Array<any> = [];\n\n  isLoading: boolean = false;\n  userdataTPK: any;\n  halaman = 1;\n  fakeUsers: Array<any> = new Array(5);\n\n  batasAtas = 1;\n  batasBawah = 20;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public viewCtrl: ViewController,\n    public storage: Storage,\n    public loadingCtrl: LoadingController,\n    public soapService: SoapService,\n    public alertCtrl: AlertController,\n    public datePipe: DatePipe,\n    public datePicker: DatePicker,\n    public platform: Platform,\n    public currencyPipe: CurrencyPipe,\n    public toastCtrl: ToastController\n  ) {    \n    let date = new Date();\n    let currentYear = date.getFullYear();\n    let lastYear = date.getFullYear() - 1;\n    let currentMonth = date.getMonth();\n    this.bulan = (currentMonth+1).toString();\n    this.tahun = currentYear; \n\n    for (var i = 0; i < 10; i++) {\n      this.tahunList.push(currentYear - i);\n    }    \n\n    this.storage.get('userdataTPK').then(val => {\n      this.userdataTPK = val;\n      //this.getSearchList('first','');\n    });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SearchPayslipPage');\n  }\n\n  doSearch() {\n    //this.halaman = 1;\n    this.batasAtas = 1;\n    this.batasBawah = 20;\n    this.epayslipList = [];\n    this.getSearchList('first', '');\n  }\n\n  getSearchList(type, functionName) {   \n\n    if (type == 'first' && functionName == '') {\n      this.isLoading = true;\n    }\n\n    this.soapService\n      // .post(\"http://103.19.80.188/api/index.php?wsdl\", 'eoffice_payslip_list', {\n        // fStream: JSON.stringify(\n        //   {\n        //     usernameEDI: api_user,\n        //     passwordEDI: api_pass,\n        //     tahun: this.tahun,\n        //     bulan: this.bulan,\n        //     nipp: this.userdataTPK['data']['NIPP'],\n        //     page: this.halaman,\n        //     jmlpage: \"15\",\n        //   }\n        // )\n      //}\n      .post('http://103.19.80.188/api/index.php?wsdl','eoffice_bypass_wso',{\n        fStream:JSON.stringify(\n          {\n            sc_type: 'searchpayslip',\n            sc_code: sc_code,        \n            data : {\n              nipp : this.userdataTPK['data']['NIPP'],\n              bulan : this.bulan,\n              tahun : this.tahun,\n              atas: this.batasAtas,\n              bawah: this.batasBawah\n            }        \n          }\n        )\n      }\n      ).then(result => {\n        var responData = JSON.parse(String(result));     \n        console.log(responData);\n        if (responData['rcmsg'] == \"SUCCESS\") {\n          if (type == 'refresh' && functionName != '') {\n            this.epayslipList = [];\n          }\n          if (responData['data'].length > 0 && !this.isEmptyObject(responData['data'][0])) {\n            for (var i = 0; i < responData['data'].length; i++) {\n              this.epayslipList.push(responData['data'][i]);\n            }\n          }          \n        } else {\n          let toast = this.toastCtrl.create({\n            message: 'Mohon Maaf Sedang Terjadi Kesalahan, Coba Beberapa Saat Lagi.',\n            duration: 3000,\n            position: 'bottom'\n          });\n          toast.present();\n        }\n\n        if (type == 'first' && functionName == '') {\n          this.isLoading = false;\n        } else if (type == 'infinite' && functionName != '') {\n          functionName.complete();\n        } else if (type == 'refresh' && functionName != '') {\n          functionName.complete();\n        }\n        \n      })\n      .catch(error => {        \n        let toast = this.toastCtrl.create({\n          message: 'Terjadi Masalah Koneksi, Silahkan Coba Kembali.',\n          duration: 3000,\n          position: 'bottom'\n        });\n        toast.present();\n\n        if (type == 'first' && functionName == '') {\n          this.isLoading = false;\n        } else if (type == 'infinite' && functionName != '') {\n          functionName.complete();\n        } else if (type == 'refresh' && functionName != '') {\n          functionName.complete();\n        }\n        \n      });\n  }\n\n  doInfinite(infiniteScroll) {      \n    // this.halaman++;\n    if (this.epayslipList.length >= 10) {\n      this.batasAtas = this.batasBawah + 1;\n      this.batasBawah = this.batasBawah + 10;\n      this.getSearchList('infinite', infiniteScroll);  \n    } else {\n      infiniteScroll.complete();\n    }   \n    // this.getSearchList('infinite', infiniteScroll);\n  }\n\n\n  closeModal() {\n    this.viewCtrl.dismiss();\n  }\n\n  clearField() {\n    this.tahun = '';\n    this.bulan = '';\n  }\n\n  convertCurrency(money1, money2) {\n    if (money1 != '' && money2 != '') {\n      let hasil = parseInt(money1) - parseInt(money2);\n      let final = this.currencyPipe.transform(hasil, 'IDR');\n      console.log(final);\n      return String(final).substr(3);\n    } else {\n      return '0';\n    }\n  }\n\n  goToDetail(data) {\n    this.navCtrl.push('PayslipDetailPage', { periodGroup: data['PERIOD_GROUP'], nipp: this.userdataTPK.data.NIPP });\n  }\n\n  isEmptyObject(obj) {\n    for (var prop in obj) {\n      if (obj.hasOwnProperty(prop)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search-payslip/search-payslip.ts"],"sourceRoot":""}