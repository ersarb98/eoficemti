{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"47.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component, ContentChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform, LoadingController, AlertController, ToastController } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { api_base_url, api_user, api_pass, sender_id, oneSignalAppId, sc_code } from '../../config';\nimport { SoapService } from '../soap.service';\nimport { Storage } from '@ionic/storage';\nimport { OneSignal } from '@ionic-native/onesignal';\n\n// import { api_base_url } from '../../config';\n// import { HttpClient } from '@angular/common/http';\n\n/**\n * Generated class for the LoginPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  providers: [SoapService],\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n  formLogin: FormGroup;\n  public isValid: boolean = true;\n  loginDataResponse: any;\n  public errorMessage: string;\n  public responData: any;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public platform: Platform,\n    public formBuilder: FormBuilder,\n    public loadingCtrl: LoadingController,\n    public alertCtrl: AlertController,\n    public storage: Storage,\n    public toastCtrl: ToastController,\n    public soapService: SoapService,\n    public oneSignal: OneSignal\n  ) {\n    this.formLogin = formBuilder.group({\n      username: ['', Validators.required],\n      password: ['', Validators.required],\n      swipe: [false, Validators.requiredTrue]\n    });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LoginPage');\n  }\n\n  doLogin() {\n    if (!this.formLogin.valid) {\n      this.isValid = false;\n      this.errorMessage = ' *Username dan Password harus diisi';\n    } else {\n      let loading = this.loadingCtrl.create({\n        spinner: 'dots',\n        content: \"Mohon Tunggu...\",\n        cssClass: 'transparent',\n        dismissOnPageChange: true\n      });\n      loading.present();\n      this.soapService\n        .post(api_base_url, 'eoffice_login', {\n          fStream: JSON.stringify(\n            {\n              usernameEDI: api_user,\n              passwordEDI: api_pass,\n              username: this.formLogin.controls.username.value,\n              password: this.formLogin.controls.password.value\n            }\n          )\n        })\n        .then(result => {\n\n          this.responData = JSON.parse(String(result));\n          console.log(this.responData);\n          if (this.responData['rcmsg'] == \"SUCCESS\") {\n\n            if (this.responData['data']['login_status'] == '404 Not Found') {\n              this.isValid = false;\n              this.errorMessage = ' *Username atau Password Salah';\n              loading.dismiss();\n            } else if (this.responData['data'] == undefined) {\n              this.isValid = false;\n              this.errorMessage = ' *Username atau Password Salah';\n              loading.dismiss();\n            } else if (this.responData['data']['login_status'] == 'AP NOT ALLOWED') {\n              this.isValid = false;\n              this.errorMessage = ' *Login Hanya Untuk Pusat dan Cabang';\n              loading.dismiss();\n            }\n            else {\n              this.isValid = true;                          \n              this.storage.set('userdataTPK', this.responData);\n\n              if (this.platform.is('cordova')) {\n                this.registerOneSignal(loading);\n                loading.dismiss();\n                this.navCtrl.setRoot('Home3Page');\n              } else {\n                loading.dismiss();\n                this.navCtrl.setRoot('Home3Page');\n              }\n            }\n          } else if (this.responData['rcmsg'] == \"User not found\") {\n            this.isValid = false;\n            this.errorMessage = ' *Username Anda Tidak Terdaftar di IVO';\n            loading.dismiss();\n          } else {\n            this.isValid = false;\n            this.errorMessage = ' *Username atau Password Salah';\n            loading.dismiss();\n          }\n        })\n        .catch(error => {\n          this.isValid = false;\n          this.errorMessage = ' *Login Gagal, Periksa Koneksi Internet Anda';\n          loading.dismiss();\n        });\n    }\n  }\n\n  registerOneSignal(loading) {\n    this.oneSignal.startInit(oneSignalAppId, sender_id);\n\n    var notificationOpenedCallback = function (jsonData) {\n    };\n\n    this.oneSignal.getIds().then((id) => {\n      this.soapService\n        .post(api_base_url, 'eoffice_regis_notif_user', {\n          fStream: JSON.stringify(\n            {\n              id_user: this.responData['data']['IDUSER'],\n              nipp: this.responData['data']['NIPP'],\n              player_ids: id.userId,\n              usernameEDI: api_user,\n              passwordEDI: api_pass\n            }\n          )\n        }).then(result => {\n          this.responData = JSON.parse(String(result));\n          loading.dismiss();\n          this.navCtrl.setRoot('Home3Page');\n\n        }).catch(error => {\n          this.errorMessage = ' *Login Gagal, Silahkan Coba Kembali.';\n          loading.dismiss();\n        });\n    });\n    this.oneSignal.endInit();\n  }\n\n  disableButton() {\n    if (this.formLogin.valid == false) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}